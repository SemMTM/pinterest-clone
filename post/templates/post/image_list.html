{% load custom_filters %}

{% for post in page_obj %}
{% if forloop.last %}
<div 
    class="grid-item" 
    hx-trigger="revealed" 
    hx-get="{% url 'home' %}?page={{ page_obj.number|add:1 }}"
    hx-swap="afterend">
    <div class="item-content">
        <a class="grid-image" href="{% url 'post_detail' post.id %}">
            <img src="{{ post.image.url|force_https }}?f_auto,q_auto,cacheControl=public,max-age=31536000" 
                 alt="{{ post.title }}" loading="lazy"/>
        </a>
    </div>
</div> 

{% else %}
<div class="grid-item">
    <div class="item-content">
        <a class="div-link" href="{% url 'post_detail' post.id %}">
            <img src="{{ post.image.url|force_https }}?f_auto,q_auto,cacheControl=public,max-age=31536000" 
                 alt="{{ post.title }}" loading="lazy"/>
        </a>
    </div>
</div> 
{% endif %}
{% endfor %}